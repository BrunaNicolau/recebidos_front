<app-toolbar [pageTitle]="pageHeader"></app-toolbar>

<form
  [formGroup]="newOfficeForm"
  (ngSubmit)="confirm(newOfficeForm.value)"
  class="form-container"
  >
  <mat-grid-list cols="1" rowHeight="100px" class="alingForm">
    <mat-grid-tile>
      <p class="alingLine">
        <mat-form-field appearance="fill">
          <mat-label>Responsavel</mat-label>
          <input matInput formControlName="responsable" />
          @if (newOfficeForm.controls['responsable'].hasError('required')) {
            <mat-error
              >
              O responsavel é obrigatório
            </mat-error>
          }
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Endereco</mat-label>
          <input matInput formControlName="address" />
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>CEP</mat-label>
          <input
            matInput
            formControlName="zipCode"
            maxlength="9"
            mask="00000-000"
            />
          @if (newOfficeForm.controls['zipCode'].hasError('required')) {
            <mat-error
              >
              O CEP é obrigatório
            </mat-error>
          }
          @if (
            newOfficeForm.controls['zipCode'].value.length < 9 &&
            !newOfficeForm.controls['zipCode'].hasError('required')
            ) {
            <mat-error
              >
              Por favor insira um CEP válido
            </mat-error>
          }
        </mat-form-field>
      </p>
    </mat-grid-tile>
    <mat-grid-tile>
      <p class="alingLine">
        <mat-form-field appearance="fill">
          <mat-label>Telefone</mat-label>
          <input
            type="tel"
            matInput
            formControlName="telephone"
            mask="(00) 0000-0000 || (00) 00000-0000"
            maxlength="16"
            />
          @if (newOfficeForm.controls['telephone'].hasError('required')) {
            <mat-error
              >
              O telefone é obrigatório
            </mat-error>
          }
          @if (
            newOfficeForm.controls['telephone'].value.length < 13 &&
            !newOfficeForm.controls['telephone'].hasError('required')
            ) {
            <mat-error
              >
              Por favor insira um Telefone válido
            </mat-error>
          }
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>E-mail</mat-label>
          <input type="email" matInput formControlName="email" />
          @if (
            newOfficeForm.controls['email'].hasError('email') &&
            !newOfficeForm.controls['email'].hasError('required')
            ) {
            <mat-error
              >
              Por favor insira um endereço de e-mail válido
            </mat-error>
          }
          @if (newOfficeForm.controls['email'].hasError('required')) {
            <mat-error
              >
              O e-mail é obrigatório
            </mat-error>
          }
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Documento(CPF/CNPJ)</mat-label>
          <input
            matInput
            formControlName="document"
            maxlength="20"
            mask="000.000.000-00 || 000.000.000/0000-00"
            />
          @if (newOfficeForm.controls['document'].hasError('required')) {
            <mat-error
              >
              O documento é obrigatório
            </mat-error>
          }
          @if (
            newOfficeForm.controls['document'].value.length < 14 &&
            !newOfficeForm.controls['document'].hasError('required')
            ) {
            <mat-error
              >
              Por favor insira um documento válido
            </mat-error>
          }
        </mat-form-field>
      </p>
    </mat-grid-tile>

    <mat-grid-tile>
      <p class="alingLine">
        <mat-form-field>
          <mat-label>Data Inicio</mat-label>
          <input
            matInput
            [matDatepicker]="pickerStartDate"
            formControlName="startDate"
            />
          <mat-datepicker-toggle
            matIconSuffix
            [for]="pickerStartDate"
          ></mat-datepicker-toggle>
          <mat-datepicker #pickerStartDate></mat-datepicker>
        </mat-form-field>
      </p>
    </mat-grid-tile>
  </mat-grid-list>
  <div class="button-container">
    <button mat-button color="primary" type="button" (click)="backToLastPage()">
      Voltar
    </button>
    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="!newOfficeForm.valid"
      >
      Confirmar
    </button>
  </div>
</form>
